comanche-branch-1 release branched from condor-branch-1 (SHA1 bb0bbd77479125307c7f08511981e37dd260f767) @ git@github.com:hortonworks/hadoop.git


  INCOMPATIBLE CHANGES


  NEW FEATURES

    BUG-6963. Backport several hadoop 2.0 API to Comanche. (Jing Zhao via
    Brandon)

  IMPROVEMENTS
    HDFS-4880. Print the image and edits file loaded by the namenode in the
    logs. (Arpit Agarwal via suresh) 

    HDFS-6084. Namenode UI - "Hadoop" logo link shouldn't go to hadoop homepage

  BUG FIXES

    HDFS-4944. WebHDFS cannot create a file path containing characters that must
    be URI-encoded, such as space. (cnauroth)

    BUG-7668. Fix backwards-incompatible change for ClientProtocol#fsync. 
    (Jing Zhao)

    BUG-10178. Fix negative value for JobInProgress.finishedMapTasks.
    (acmurthy) 

    HDFS-3404. Make putImage in GetImageServlet infer remote address to fetch from
    request. (Backported by Jing Zhao)

  Snapshot related changes

    Changes with Apache jira in trunk/branch-2

      HDFS-4842. Snapshot: identify the correct prior snapshot when deleting 
      a snapshot under a renamed subtree. (Jing Zhao)

      HDFS-4857. Snapshot.Root and AbstractINodeDiff#snapshotINode should 
      not be put into INodeMap when loading FSImage. (Jing Zhao)
      
      HDFS-4863. The root directory should be added to the snapshottable 
      directory list while loading fsimage. (Jing Zhao)

      HDFS-4846. Clean up snapshot CLI commands output stacktrace for invalid 
      arguments. (Jing Zhao)
      
      HDFS-4848. copyFromLocal and renaming a file to .snapshot should output 
      that .snapshot is a reserved name. (Jing Zhao)
  
      HDFS-4850. fix OfflineImageViewer to work on fsimages with empty files 
      or snapshots. (Jing Zhao)
      
      HDFS-4876. The javadoc of FileWithSnapshot is incorrect. (Jing Zhao)
      
      HDFS-4877. Snapshot: fix the scenario where a directory is renamed under
      its prior descendant. (Jing Zhao)

      HDFS-4902. DFSClient.getSnapshotDiffReport should use string path rather 
      than o.a.h.fs.Path. (Jing Zhao)

      HDFS-4875. Add a test for testing snapshot file length. (Arpit Agarwal
      via Jing Zhao)

      HDFS-5005. Move SnapshotException and SnapshotAccessControlException to 
      o.a.h.hdfs.protocol. (Jing Zhao)

      MAPREDUCE-5408. Backport MAPREDUCE-336 to branch-1. (acmurthy)

      MAPREDUCE-4661. Backport HTTPS to WebUIs to branch-1. (Michael Wang via
      acmurthy)

  NFS related changes
 
    No Apache Jira created yet

      NFS: fix to BUG-5966 fix wrong XDR method names. (Brandon Li)

      NFS: fix to BUG-5750 Input/output error after restarting Namenode while 
      uploading data. (Brandon Li)
      
      NFS: fix to BUG-5934 RuntimeException causes data loading 
      failure. (Brandon Li)

      NFS: change some trace level and add lock/unlock trace. (Brandon Li)
      
      NFS: fix to BUG-6111 use final clause to gauarntee OpenFileCtx lock is 
      unlocked eventually. (Brandon Li)

      NFS: fix readdir/readdirplus response to copy dirents to response

      NFS: commit missed file in efb86376a67c1ee17ff5b51f6ef49772ed11578d

      NFS: integrate HADOOP-9515 from trunk

      NFS: integrate HADOOP-9505 from trunk

      NFS: fix to BUG-6609 reduce lock granularity in OpenFileCtx

      NFS: fix to BUG-6352 should resend response for some repeated write request

    Changes with Apache jira in trunk

