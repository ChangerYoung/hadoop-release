Changes only in Hortonworks github and not in hadoop-2.6.0 and hence not covered by CHANGES.txt.

  INCOMPATIBLE CHANGES

  NEW FEATURES

    HDFS-6581. Support for writing to single replica in RAM.
    Applied HDFS-6581.merge.15.patch to Champlain. This is a consolidated
    patch containing all feature changes and was applied to trunk.
    (Multiple contributors via Arpit Agarwal)

    YARN-2837. Support TimeLine server to recover delegation token when
    restarting. (Zhijie Shen via jianhe)

  IMPROVEMENTS

    HDFS-7153. Add storagePolicy to NN edit log during file creation.
    (Arpit Agarwal).
    Cherry-picked commit ID 9e9e9cf from apache/trunk.

    HDFS-7093. Add config key to restrict setStoragePolicy. (Arpit Agarwal)
    Cherry-picked commit ID b38e52b from apache/trunk.

    HADOOP-9629. Support Windows Azure Storage - Blob as a file system in Hadoop.
    (Dexter Bradshaw, Mostafa Elhemali, Xi Fang, Johannes Klein, David Lao,
    Mike Liddell, Chuan Liu, Lengning Liu, Ivan Mitic, Michael Rys,
    Alexander Stojanovic, Brian Swan, and Min Wei via cnauroth)

    YARN-1979. TestDirectoryCollection fails when the umask is unusual.
    (Vinod Kumar Vavilapalli and Tsuyoshi OZAWA via junping_du)

    YARN-2190. Added CPU and memory limit options to the default container
    executor for Windows containers. (Chuan Liu via jianhe)

    MAPREDUCE-4815. Speed up FileOutputCommitter#commitJob for many output files.
    (Siqi Li via gera)

    HADOOP-11960. Enable Azure-Storage Client Side logging.
    (Dushyanth via cnauroth)

  BUG FIXES

    HDFS-27. HDFS CLI with --config set to default config complains log file not
    found error. (cnauroth)

    HADOOP-10839. Add unregisterSource() to MetricsSystem API.
    (Shanyu Zhao via cnauroth)

    HADOOP-10840. Fix OutOfMemoryError caused by metrics system in Azure File
    System. (Shanyu Zhao via cnauroth)

    HADOOP-10689. InputStream is not closed in
    AzureNativeFileSystemStore#retrieve(). (Chen He via cnauroth)

    HADOOP-10690. Lack of synchronization on access to InputStream in
    NativeAzureFileSystem#NativeAzureFsInputStream#close().
    (Chen He via cnauroth)

    HADOOP-10728. Metrics system for Windows Azure Storage Filesystem.
    (Dexter Bradshaw, Mostafa Elhemali, Xi Fang, Johannes Klein, David Lao,
    Mike Liddell, Chuan Liu, Lengning Liu, Ivan Mitic, Michael Rys,
    Alexander Stojanovich, Brian Swan, and Min Wei via cnauroth)

    HADOOP-10840. Fix OutOfMemoryError caused by metrics system in Azure File
    System. (Shanyu Zhao via cnauroth)

    HADOOP-10809. hadoop-azure: page blob support. (Dexter Bradshaw,
    Mostafa Elhemali, Eric Hanson, and Mike Liddell via cnauroth)

    HADOOP-11188. hadoop-azure: automatically expand page blobs when they become
    full. (Eric Hanson via cnauroth)

    HADOOP-11248. Add hadoop configuration to disable Azure Filesystem metrics
    collection. (Shanyu Zhao via cnauroth)

    YARN-2254. TestRMWebServicesAppsModification should run against both 
    CS and FS. (Zhihai Xu via kasha)

    HDFS-7503. Namenode restart after large deletions can cause slow
    processReport. (Arpit Agarwal)

    HDFS-7503. Namenode restart after large deletions can cause slow
    processReport. (Arpit Agarwal)

    HDFS-7425. NameNode block deletion logging uses incorrect appender.
    (cnauroth)

    HADOOP-11321. copyToLocal cannot save a file to an SMB share unless the user
    has Full Control permissions. (cnauroth)

    HDFS-7514. TestTextCommand fails on Windows. (Arpit Agarwal)

    YARN-2917. Fixed potential deadlock when system.exit is called in
    AsyncDispatcher. (Rohith Sharmaks via jianhe)

    YARN-570. Time strings are formated in different timezone. (Akira Ajisaka
    and Peng Zhang via kasha)

    YARN-2964. RM prematurely cancels tokens for jobs that submit jobs (oozie)
    (Jian He via jlowe)

    HDFS-7443. BUG-29367. Datanode upgrade to BLOCKID_BASED_LAYOUT fails if
    duplicate block files are present in the same volume. (cmccabe)

    HDFS-7560. ACLs removed by removeDefaultAcl() will be back after NameNode
    restart/failover. (Vinayakumar B via cnauroth)

    BUG-26128/YARN-2571. RM to support YARN registry. Contributed by Steve
    Loughran.

    BUG-26133/YARN-2683. Service registry config options: document and move to
    core-default. Contributed by Steve Loughran.

    HDFS-7489. Incorrect locking in FsVolumeList#checkDirs can hang datanodes
    (Noah Lorang via Colin P. McCabe)

    YARN-3103. AMRMClientImpl does not update AMRM token properly. (Jason Lowe
    via jianhe)

    MAPREDUCE-6230. Fixed RMContainerAllocator to update the new AMRMToken
    service name properly. Contributed by Jason Lowe

    HADOOP-11509. change parsing sequence in GenericOptionsParser to parse
    -D parameters before -files. (xgong)

    HADOOP-11523. StorageException complaining " no lease ID" when updating
    FolderLastModifiedTime in WASB. (Duo Xu via cnauroth)

    BUG-31164. HDFS-7733. NFS: readdir/readdirplus return null directory
    attribute on failure.

    YARN-2246. Made the proxy tracking URL always be
    http(s)://proxy addr:port/proxy/<appId> to avoid duplicate sections. (Devaraj
    K via zjshen)

    HDFS-7714. Simultaneous restart of HA NameNodes and DataNode can cause
    DataNode to register successfully with only one NameNode.(vinayakumarb)

    HDFS-7611. deleteSnapshot and delete of a file can leave orphaned blocks
    in the blocksMap on NameNode restart. (jing9)

    YARN-3207. Secondary filter matches entites which do not have the key being
    filtered for. (Zhijie Shen via xgong)

    HDFS-7009. Active NN and standby NN have different live nodes.
    (Ming Ma via cnauroth)

    HADOOP-11629. WASB filesystem should not start BandwidthGaugeUpdater if
    fs.azure.skip.metrics set to true. (Shanyu Zhao via cnauroth)

    HDFS-7831. Fix the starting index and end condition of the loop in
    FileDiffList.findEarlierSnapshotBlocks(). (Konstantin Shvachko via jing9)

    YARN-3239. WebAppProxy does not support a final tracking url which has
    query fragments and params (Jian He via jlowe)

    YARN-42. Yarn.nodemanager.remote-app-log-dir could not be configured to fully
    qualified path. (xgong)

    BUG-32378. NN went down during RB test due to storage version mismatch.
    (jing9)

    HDFS-7855. Datanode should not trust the generation stamp provided by
    client. (Tsz Wo Nicholas Sze)

    YARN-3227. Timeline renew delegation token fails when RM user's TGT is expired
    (Zhijie Shen via xgong)

    HADOOP-11642. Upgrade azure sdk version from 0.6.0 to 2.0.0.
    (Shashank Khandelwal and Ivan Mitic via cnauroth)

    HADOOP-11693. Azure Storage FileSystem rename operations are throttled too
    aggressively to complete HBase WAL archiving. (Duo Xu via cnauroth)

    YARN-3393. Getting application(s) goes wrong when app finishes before
    starting the attempt. (Zhijie Shen via xgong)

    HDFS-8072. Reserved RBW space is not released if client terminates
    while writing block. (Arpit Agarwal)

    MAPREDUCE-6275. Race condition in FileOutputCommitter v2 for user-specified
    task output subdirs. Contributed by Gera Shegalov and Siqi Li

    HDFS-8127. NameNode Failover during HA upgrade can cause DataNode to finalize
    upgrade. (jing9)

    HDFS-7035. Make adding a new data directory to the DataNode an atomic
    operation and improve error handling (Lei Xu via Colin P. McCabe)

    HDFS-7575. Upgrade should generate a unique storage ID for each
    volume. (Arpit Agarwal)

    HDFS-7596. NameNode should prune dead storages from storageMap.
    (Arpit Agarwal via cnauroth)

    HDFS-7579. Improve log reporting during block report rpc failure.
    (Charles Lamb via cnauroth)

    HDFS-7960. The full block report should prune zombie storages even if
    they're not empty. (cmccabe and Eddy Xu via wang)

    YARN-2906. CapacitySchedulerPage shows HTML tags for a queue's Active Users.
    Contributed by Jason Lowe

    YARN-2905. AggregatedLogsBlock page can infinitely loop if the aggregated
    log file is corrupted

    YARN-2414. RM web UI: app page will crash if app is failed before any
    attempt has been created. Contributed by Wangda Tan

    YARN-2992. ZKRMStateStore crashes due to session expiry. Contributed by
    Karthik Kambatla

    YARN-2340. Fixed NPE when queue is stopped during RM restart. Contributed
    by Rohith Sharmaks

    YARN-2874. Dead lock in DelegationTokenRenewer which blocks RM to execute
    any further apps. (Naganarasimha G R via kasha)

    YARN-2816. NM fail to start with NPE during container recovery.
    (Zhihai Xu via jlowe)

    HDFS-7587 [BUG-35869]. Edit log corruption can happen if append fails with
    a quota violation. (Rewrite of HDFS-7587 fix for 2.2. jing9 via
    Arpit Agarwal)

    HDFS-8486. DN startup may cause severe data loss. Contributed by Daryn
    Sharp.

    HDFS-7980. Incremental BlockReport will dramatically slow down the startup of
    a namenode. Contributed by Walter Su.

    BUG-46749. HDFS-7097. Allow block reports to be processed during
    checkpointing on standby name node. (kihwal via wang)

    BUG-57307. HDFS-7213. processIncrementalBlockReport performance degradation.
    (Eric Payne via kihwal)

    BUG-57308. HADOOP-11430. Add GenericTestUtils#disableLog,
    GenericTestUtils#setLogLevel (cmccabe) (cherry picked from commit
    6635ccd21766faf8f6a15d937dc8919a9075c988)

    BUG-57308. HDFS-7706. Switch BlockManager logging to use slf4j.

    BUG-57308. HDFS-7712. Switch blockStateChangeLog to use slf4j.

    BUG-57308. HDFS-9839. Reduce verbosity of processReport logging.
    (Contributed by Arpit Agarwal)

    BUG-57007. HDFS-9917. IBR accumulate more objects when SNN was down for
    sometime. (Contributed by Brahma Reddy Battula)

    BUG-57309. HDFS-7398. Reset cached thread-local FSEditLogOp's on every
    FSEditLog#logEdit. Contributed by Gera Shegalov.

    BUG-57309. HDFS-7609. Avoid retry cache collision when Standby NameNode
    loading edits. Contributed by Ming Ma.

    BUG-57308. HDFS-7734. Class cast exception in NameNode#main. Contributed by
    Yi Liu.

    BUG-65454. HDFS-6860. BlockStateChange logs are too noisy. Contributed by
    Chang Li and Xiaoyu Yao.

    BUG-65457. HDFS-7962. Remove duplicated logs in BlockManager. (yliu)

    BUG-65455. HDFS-9618. Fix mismatch between log level and guard in
    BlockManager#computeRecoveryWorkForBlocks (iwasakims)

    BUG-65456. HDFS-6425. Large postponedMisreplicatedBlocks has impact on
    blockReport latency. Contributed by Ming Ma.

    BUG-64071. HDFS-9906. Remove spammy log spew when a datanode is restarted.
    (Contributed by Brahma Reddy Battula)

    BUG-64071. HDFS-5782. BlockListAsLongs should take lists of Replicas rather
    than concrete classes

    BUG-64071. HDFS-7435. PB encoding of block reports is very inefficient

    BUG-43485. Truncate is not allowed in FSNameSystem causes a set of test failures

    BUG-64071. BUG-43490. Unexpected version of the file system log file
